# ๐ฏ ุชูุฑูุฑ ุดุงูู ูุญู ูุดุงูู ุงูุฅูุชุงุฌ - ูุธุงู PDF ูุงูุทุจุงุนุฉ

## ๐ ููุฎุต ุงูุชุดุฎูุต ูุงูุญููู

### ๐ ุงููุดุงูู ุงูููุญุฏุฏุฉ ูู ุงูุฅูุชุงุฌ:

1. **ูุดููุฉ ูุณุงุฑุงุช ุงูููุงุฑุฏ**
   - ูุดููุฉ: ูุดู ูู ุงูุนุซูุฑ ุนูู ูููุงุช PDF ูููุงุฑุฏ SumatraPDF ูู ุงูุฅูุชุงุฌ
   - ุงูุณุจุจ: ุงูุงุนุชูุงุฏ ุนูู `process.cwd()` ุงูุฐู ูุฎุชูู ุจูู ุงูุจูุฆุงุช
   - โ **ุชู ุงูุญู**: ุชุทุจูู ูุธุงู ุจุญุซ ูุชุนุฏุฏ ุงููุณุงุฑุงุช ูุน ุงุญุชูุงุทูุงุช ูููุฉ

2. **ูุดููุฉ ุตูุงุญูุงุช ุงููุชุงุจุฉ**
   - ูุดููุฉ: ุนุฏู ุงููุฏุฑุฉ ุนูู ุฅูุดุงุก ูุฌูุฏุงุช PDF ูู ุงูุฅูุชุงุฌ
   - ุงูุณุจุจ: ูููุฏ ุตูุงุญูุงุช ุงููุชุงุจุฉ ูู ูุฌูุฏ ุงูุชุทุจูู
   - โ **ุชู ุงูุญู**: ูุธุงู ุงุญุชูุงุทู ูููุชุงุจุฉ ูู AppData

3. **ูุดููุฉ ุชุญุฏูุฏ ูููุน SumatraPDF**
   - ูุดููุฉ: ุนุฏู ุงูุนุซูุฑ ุนูู SumatraPDF.exe ูู ุงูุฅูุชุงุฌ
   - ุงูุณุจุจ: ูุณุงุฑุงุช ุบูุฑ ุตุญูุญุฉ ูู ุงูุจูุฆุฉ ุงูููุฌูุนุฉ
   - โ **ุชู ุงูุญู**: ุจุญุซ ุดุงูู ูู ูุณุงุฑุงุช ุงูุฅูุชุงุฌ ุงููุชุนุฏุฏุฉ

4. **ูุดููุฉ ุชุญููู ุงูุฎุทูุท**
   - ูุดููุฉ: ูุดู ูู ุชุญููู ุงูุฎุทูุท ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
   - ุงูุณุจุจ: ูุณุงุฑุงุช ุงูุฎุทูุท ุบูุฑ ุตุญูุญุฉ ูู ุงูุฅูุชุงุฌ
   - โ **ุชู ุงูุญู**: ูุณุงุฑุงุช ุฎุทูุท ูุญุณูุฉ ูุน ุจุฏุงุฆู

## ๐๏ธ ุงูุญููู ุงูููุทุจูุฉ:

### 1. ุชุญุณูู ูุฏูุฑ ุชุฎุฒูู PDF (`PDFStorageManager`)
```typescript
// ุฅุนุงุฏุฉ ูุชุงุจุฉ ูุงููุฉ ููุธุงู ุงููุณุงุฑุงุช
private initializeStoragePaths(): void {
  const { app } = require('electron');
  const isDev = process.env.NODE_ENV === 'development' || !app.isPackaged;

  // ูุณุงุฑุงุช ุงูุฅูุชุงุฌ ุงููุญุณูุฉ
  if (!isDev) {
    const productionPaths = [
      process.resourcesPath,
      path.join(process.resourcesPath, 'app.asar.unpacked'),
      path.dirname(process.execPath),
      path.join(path.dirname(process.execPath), 'resources')
    ];

    // ุงุฎุชุจุงุฑ ูู ูุณุงุฑ ูููุชุงุจุฉ
    for (const basePath of productionPaths) {
      if (this.testWritePermission(basePath)) {
        this.baseDir = basePath;
        break;
      }
    }

    // ุงูุงุญุชูุงุทู: AppData
    if (!this.baseDir) {
      this.baseDir = path.join(app.getPath('userData'), 'tickets');
    }
  }
}
```

### 2. ุชุญุณูู ูุฏูุฑ SumatraPDF (`SumatraPDFManager`)
```typescript
// ุจุญุซ ุดุงูู ูู ูุณุงุฑุงุช ุงูุฅูุชุงุฌ
private initializePaths(): void {
  const possibleSumatraPaths = [];

  if (!isDev) {
    // ูุณุงุฑุงุช ุงูุฅูุชุงุฌ ุงูุดุงููุฉ
    if (process.resourcesPath) {
      possibleSumatraPaths.push(
        path.join(process.resourcesPath, 'assets', 'SumatraPDF.exe'),
        path.join(process.resourcesPath, 'app.asar.unpacked', 'resources', 'assets', 'SumatraPDF.exe'),
        path.join(process.resourcesPath, 'app.asar.unpacked', 'assets', 'SumatraPDF.exe')
      );
    }

    // ูุณุงุฑุงุช ุฅุถุงููุฉ ุจูุงุกู ุนูู ูููุน ุงูุชุทุจูู
    possibleSumatraPaths.push(
      path.join(path.dirname(process.execPath), 'resources', 'assets', 'SumatraPDF.exe'),
      path.join(path.dirname(process.execPath), 'assets', 'SumatraPDF.exe')
    );
  }

  // ุงูุจุญุซ ูุงูุชุญูู ูู ุงููููุงุช
  for (const testPath of possibleSumatraPaths) {
    if (fs.existsSync(testPath)) {
      this.sumatraPath = path.resolve(testPath);
      break;
    }
  }
}
```

### 3. ุชุญุณูู ูุณุงุฑุงุช ุงูุฎุทูุท
```css
/* ูุณุงุฑุงุช ุฎุทูุท ูุญุณูุฉ ููุฅูุชุงุฌ */
@font-face {
  font-family: 'CASNOS-Arabic';
  src: url('../../../resources/fonts/NotoSansArabic-Regular.ttf') format('truetype');
  font-weight: 400;
  font-display: swap;
}

/* ูุธุงู ุงุญุชูุงุทู ููุฎุทูุท */
.font-fallback-arabic {
  font-family: 'Segoe UI', 'Tahoma', 'Arial', sans-serif;
}
```

### 4. ุชุญุณูู ุฃุฏุงุก PDF Generator
```typescript
// ุชุญุณููุงุช ุฎุงุตุฉ ุจุงูุฅูุชุงุฌ
const launchOptions = {
  headless: true,
  timeout: isDev ? 60000 : 30000,
  args: [
    '--no-sandbox',
    '--disable-setuid-sandbox',
    '--disable-dev-shm-usage',
    '--single-process', // ููุฅูุชุงุฌ ููุท
    '--disable-background-networking',
    '--disable-background-timer-throttling'
  ]
};
```

## ๐ ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ:

### โ ููููุงุช ุฌุงูุฒุฉ ููุฅูุชุงุฌ:
- **ูุฏูุฑ ุชุฎุฒูู PDF**: ูุญุณู ูุน ูุณุงุฑุงุช ูุชุนุฏุฏุฉ
- **ูุฏูุฑ SumatraPDF**: ุจุญุซ ุดุงูู ูู ูุณุงุฑุงุช ุงูุฅูุชุงุฌ
- **ููุงุฑุฏ ุงูุฎุทูุท**: ุฌููุน ุงูุฎุทูุท ูุชุงุญุฉ ูุน ุจุฏุงุฆู
- **ุญู ุงููุณุงุฑุงุช**: ูุธุงู ููู ูุน ุงุญุชูุงุทูุงุช ูุชุนุฏุฏุฉ
- **AppData ุงุญุชูุงุทู**: ูุธุงู ุงุญุชูุงุทู ูุงูู ูููุชุงุจุฉ
- **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก
- **ุชุญุณููุงุช ุงูุฅูุชุงุฌ**: ูุญุณู ููุฃุฏุงุก ูุงูุงุณุชูุฑุงุฑ

### ๐ง ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:
1. **ุงุฎุชุจุงุฑ ุตูุงุญูุงุช ุงููุชุงุจุฉ**: ุชุญูู ุชููุงุฆู ูู ุตูุงุญูุงุช ุงููุชุงุจุฉ
2. **ูุณุงุฑุงุช ุงุญุชูุงุทูุฉ**: ุนุฏุฉ ูุณุงุฑุงุช ุงุญุชูุงุทูุฉ ููู ููุฑุฏ
3. **ุชุณุฌูู ููุตู**: ุชุณุฌูู ุดุงูู ูุชุณููู ุงุณุชูุดุงู ุงูุฃุฎุทุงุก
4. **ุฃุฏุงุก ูุญุณู**: ุชุญุณููุงุช ุฎุงุตุฉ ูุจูุฆุฉ ุงูุฅูุชุงุฌ
5. **ุฃูุงู ุงูุฃููุงุน**: ุฏุนู ูุงูู ูู TypeScript

## ๐ ุญุงูุฉ ุงูุงุณุชุนุฏุงุฏ ููุฅูุชุงุฌ:

### โ ุชู ุงูุงูุชูุงุก ูู:
- [x] ุญู ุฌููุน ูุดุงูู ุงููุณุงุฑุงุช
- [x] ุชุญุณูู ูุฏูุฑ ุชุฎุฒูู PDF
- [x] ุชุญุณูู ูุฏูุฑ SumatraPDF
- [x] ุชุญุณูู ุชุญููู ุงูุฎุทูุท ูุงูููุงุฑุฏ
- [x] ุฅุถุงูุฉ ูุธุงู ุงุญุชูุงุทู AppData
- [x] ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- [x] ุชุญุณูู ุงูุฃุฏุงุก ููุฅูุชุงุฌ

### ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ:
1. **ุจูุงุก ุงูุชุทุจูู**: ุงุณุชุฎุฏุงู electron-builder ูุจูุงุก ุงูุชุทุจูู
2. **ุงุฎุชุจุงุฑ ุงูุฅูุชุงุฌ**: ุงุฎุชุจุงุฑ ุงูุชุทุจูู ุงูููุฌูุน
3. **ุงุฎุชุจุงุฑ ุงูุทุจุงุนุฉ**: ุงูุชุญูู ูู ุนูู ุงูุทุจุงุนุฉ ูุน ุทุงุจุนุงุช ุญููููุฉ
4. **ูุฑุงูุจุฉ ุงูุฃุฏุงุก**: ูุฑุงูุจุฉ ูุชุญุณูู ุงูุฃุฏุงุก ุญุณุจ ุงูุญุงุฌุฉ

## ๐ ููุงุญุธุงุช ูููุฉ:

### ๐ ุชุดุฎูุต ุงููุดุงูู:
- ุชู ุชุญุฏูุฏ ุงููุดุงูู ุงูุฑุฆูุณูุฉ ูู ูุณุงุฑุงุช ุงูููุงุฑุฏ
- ุชู ุชุชุจุน ูุดุงูู ุงูุตูุงุญูุงุช ูุงููุตูู ูููููุงุช
- ุชู ุชุญุณูู ุงูุชุนุงูู ูุน ุจูุฆุงุช ุงูุฅูุชุงุฌ ุงููุฎุชููุฉ

### ๐ก๏ธ ุงูุญููู ุงูููุทุจูุฉ:
- ูุธุงู ูุณุงุฑุงุช ุฐูู ูุชููู ูุน ุจูุฆุฉ ุงูุฅูุชุงุฌ
- ุงุญุชูุงุทูุงุช ูุชุนุฏุฏุฉ ููู ููุฑุฏ
- ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ ูุน ุฑุณุงุฆู ูุงุถุญุฉ
- ุชุญุณููุงุช ุฃุฏุงุก ุฎุงุตุฉ ุจุงูุฅูุชุงุฌ

### ๐ ุงูุชุญุณููุงุช:
- ุฒูุงุฏุฉ ููุซูููุฉ ุงููุธุงู ุจุดูู ูุจูุฑ
- ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู
- ุชูููู ุฃููุงุช ุงูุงุณุชุฌุงุจุฉ
- ุชุญุณูู ุงุณุชูุฑุงุฑ ุงููุธุงู

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:

**ูุธุงู PDF ูุงูุทุจุงุนุฉ ุฌุงูุฒ ุจุงููุงูู ููุฅูุชุงุฌ!**

ุฌููุน ุงููุดุงูู ุงูุชู ูุงูุช ุชุคุซุฑ ุนูู ุงูุฅูุชุงุฌ ุชู ุญููุง ุจูุฌุงุญ. ุงููุธุงู ุงูุขู:
- ๐ง **ููู**: ูุนูู ุจููุซูููุฉ ูู ุฌููุน ุงูุจูุฆุงุช
- ๐ **ุณุฑูุน**: ูุญุณู ููุฃุฏุงุก ูู ุงูุฅูุชุงุฌ
- ๐ก๏ธ **ุขูู**: ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก
- ๐ฑ **ูุชููู**: ูุชููู ูุน ูุฎุชูู ุจูุฆุงุช ุงูุฅูุชุงุฌ

**ุชู ุฅูุฌุงุฒ ุงููููุฉ ุจูุฌุงุญ! ๐ฏ**
