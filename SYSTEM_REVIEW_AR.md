# ๐ ูุฑุงุฌุนุฉ ุดุงููุฉ ููุธุงู ุฅุฏุงุฑุฉ ุงูุทูุงุจูุฑ CASNOS

## ๐๏ธ ูุนูุงุฑูุฉ ุงููุธุงู

### ุงูุจููุฉ ุงูุนุงูุฉ
```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ  Customer App   โ    โ   Display App   โ    โ Employee Apps   โ
โ   (Electron)    โ    โ   (Electron)    โ    โ   (Electron)    โ
โโโโโโโฌโโโโโโโโโโโโ    โโโโโโโฌโโโโโโโโโโโโ    โโโโโโโฌโโโโโโโโโโโโ
      โ                      โ                      โ
      โโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโ
                             โ
        โโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโ
        โ         CASNOS Server (Node.js)          โ
        โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ
        โ  โ Express API โ  โ Socket.IO Real-time โ โ
        โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ
        โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ
        โ  โ SQLite DB   โ  โ UDP Discovery       โ โ
        โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ
        โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏุงูู ุฑุฆูุณูุฉ:

1. **tickets** - ุงูุชุฐุงูุฑ
   - `id`: ูุนุฑู ูุฑูุฏ
   - `ticket_number`: ุฑูู ุงูุชุฐูุฑุฉ (ูุณุจู ููููู)
   - `service_id`: ูุนุฑู ุงูุฎุฏูุฉ
   - `status`: 'pending' | 'called' | 'served'
   - `print_status`: 'pending' | 'printing' | 'printed' | 'print_failed'
   - `created_at`: ููุช ุงูุฅูุดุงุก
   - `called_at`: ููุช ุงูุงุณุชุฏุนุงุก (NULL ุฅุฐุง ูู ุชูุณุชุฏุนู)
   - `served_at`: ููุช ุงูุฎุฏูุฉ (NULL ุฅุฐุง ูู ุชูุฎุฏู)
   - `window_id`: ูุนุฑู ุงูุดุจุงู (NULL ุฅุฐุง ูู ุชูุณุชุฏุนู)

2. **services** - ุงูุฎุฏูุงุช
   - `id`: ูุนุฑู ูุฑูุฏ
   - `name`: ุงุณู ุงูุฎุฏูุฉ
   - `created_at`, `updated_at`: ุฃููุงุช ุงูุฅูุดุงุก ูุงูุชุญุฏูุซ

3. **windows** - ุงูุดุจุงุจูู
   - `id`: ูุนุฑู ูุฑูุฏ (ููุณุชุฎุฏู ูุฑูู ุงูุดุจุงู)
   - `active`: ุญุงูุฉ ุงููุดุงุท (1/0)
   - `created_at`, `updated_at`: ุฃููุงุช ุงูุฅูุดุงุก ูุงูุชุญุฏูุซ

4. **devices** - ุงูุฃุฌูุฒุฉ
   - `id`: ูุนุฑู ูุฑูุฏ
   - `device_id`: ูุนุฑู ุงูุฌูุงุฒ (ูุฑูุฏ)
   - `device_type`: 'customer' | 'display' | 'employee'
   - `name`: ุงุณู ุงูุฌูุงุฒ
   - `status`: 'online' | 'offline'
   - `ip_address`: ุนููุงู IP

5. **device_printers** - ุทุงุจุนุงุช ุงูุฃุฌูุฒุฉ
   - `id`: ูุนุฑู ูุฑูุฏ (ููุชุงุญ ุฑุฆูุณู)
   - `device_id`: ูุนุฑู ุงูุฌูุงุฒ (ูุฑุฌุน ูุฌุฏูู devices)
   - `printer_id`: ูุนุฑู ุงูุทุงุจุนุฉ (ูุฑูุฏ ููู ุทุงุจุนุฉ)
   - `printer_name`: ุงุณู ุงูุทุงุจุนุฉ ุงููุนุฑูุถ
   - `created_at`: ููุช ุงูุฅุถุงูุฉ
   - `updated_at`: ููุช ุขุฎุฑ ุชุญุฏูุซ

   **ููุงุญุธุฉ**: ูุฑุจุท ูุฐุง ุงูุฌุฏูู ูู ุฌูุงุฒ ุจุงูุทุงุจุนุงุช ุงููุชุตูุฉ ุจูุ ูุน ููุฏ ูุฑูุฏ ุนูู (device_id, printer_id)

## ๐ API Endpoints

### ๐ซ ุชุฐุงูุฑ (Tickets)

#### ุฅูุดุงุก ุชุฐูุฑุฉ
```http
POST /api/tickets
Content-Type: application/json

{
  "service_id": 1
}
```
**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "success": true,
  "data": {
    "id": 1,
    "ticket_number": "1",
    "service_id": 1,
    "status": "pending",
    "print_status": "pending",
    "created_at": "2025-07-04T15:44:24.000Z",
    "called_at": null,
    "served_at": null,
    "window_id": null
  }
}
```

#### ุงุณุชุฏุนุงุก ุชุฐูุฑุฉ
```http
POST /api/tickets/call
Content-Type: application/json

{
  "ticket_id": 1,
  "window_id": 1
}
```

#### ุฎุฏูุฉ ุชุฐูุฑุฉ (ุชุญุฏูุซ ุงูุญุงูุฉ)
```http
PATCH /api/tickets/{id}
Content-Type: application/json

{
  "status": "served",
  "window_id": 1
}
```

#### ุชุญุฏูุซ ุญุงูุฉ ุงูุทุจุงุนุฉ
```http
PUT /api/tickets/{id}/print-status
Content-Type: application/json

{
  "print_status": "printed"
}
```

#### ุฌูุจ ุฌููุน ุงูุชุฐุงูุฑ
```http
GET /api/tickets
```

#### ุฌูุจ ุงูุชุฐุงูุฑ ุงููุนููุฉ
```http
GET /api/tickets/pending
```

#### ุฌูุจ ุชุฐุงูุฑ ุฎุฏูุฉ ูุญุฏุฏุฉ
```http
GET /api/tickets/service/{serviceId}
```

#### ุฅุญุตุงุฆูุงุช ุงููุธุงู
```http
GET /api/tickets/statistics
```

### ๐ข ุฎุฏูุงุช (Services)

#### ุฅูุดุงุก ุฎุฏูุฉ
```http
POST /api/services
Content-Type: application/json

{
  "name": "ุฎุฏูุฉ ุนููุงุก ุนุงูุฉ"
}
```

#### ุฌูุจ ุฌููุน ุงูุฎุฏูุงุช
```http
GET /api/services
```

### ๐ช ุดุจุงุจูู (Windows)

#### ุฅูุดุงุก ุดุจุงู
```http
POST /api/windows
Content-Type: application/json

{
  "active": true
}
```

#### ุฌูุจ ุฌููุน ุงูุดุจุงุจูู
```http
GET /api/windows
```

### ๐ป ุฃุฌูุฒุฉ (Devices)

#### ุชุณุฌูู ุฌูุงุฒ
```http
POST /api/devices
Content-Type: application/json

{
  "device_id": "CUSTOMER_KIOSK_01",
  "device_type": "customer",
  "name": "Customer Kiosk Terminal 1",
  "location": "Entrance Hall",
  "ip_address": "192.168.1.101"
}
```

#### ุฌูุจ ุฌููุน ุงูุฃุฌูุฒุฉ
```http
GET /api/devices
```

#### ุชุญุฏูุซ ุญุงูุฉ ุงูุฌูุงุฒ
```http
PATCH /api/devices/{deviceId}/status
Content-Type: application/json

{
  "status": "online"
}
```

### ๐ฅ ููุธููู (Employees)

#### ุฌูุจ ุฌููุน ุงูููุธููู
```http
GET /api/employees
```

#### ุฌูุจ ุงูููุธููู ุงููุดุทูู
```http
GET /api/employees/active
```

#### ุชููุฆุฉ ุฌูุณุฉ ููุธู ุฌุฏูุฏ
```http
POST /api/employees/initialize
Content-Type: application/json

{
  "deviceId": "EMPLOYEE_WIN_01",
  "deviceName": "Employee Window Terminal 1"
}
```

#### ุฅูุดุงุก ุดุจุงู ููุธู
```http
POST /api/employees/window
Content-Type: application/json

{
  "windowNumber": "1",
  "serviceId": 1,
  "serviceName": "ุฎุฏูุฉ ุนููุงุก"
}
```

#### ุชุนููู ุฎุฏูุฉ ูููุธู
```http
POST /api/employees/window/{windowNumber}/assign-service
Content-Type: application/json

{
  "serviceId": 1
}
```

#### ุฅุฒุงูุฉ ุฎุฏูุฉ ูู ููุธู
```http
DELETE /api/employees/window/{windowNumber}/service
```

#### ุฌูุจ ุฑูู ุดุจุงู ุชุงูู ูุชุงุญ
```http
GET /api/employees/next-window-number
```

### ๐ง ุฅุนุงุฏุฉ ุงูุชุนููู ุงููููู (Daily Reset)

#### ุญุงูุฉ ุงูุฅุนุงุฏุฉ ุงูููููุฉ
```http
GET /api/reset/status
```

#### ูุฑุถ ุฅุนุงุฏุฉ ุชุนููู ููุฑูุฉ
```http
POST /api/reset/force
```

#### ุชุญุฏูุซ ุฅุนุฏุงุฏุงุช ุงูุฅุนุงุฏุฉ ุงูููููุฉ
```http
PUT /api/reset/config
Content-Type: application/json

{
  "enabled": true,
  "resetTime": "00:00",
  "autoReset": true
}
```

### ๐จ๏ธ ุทุงุจุนุงุช ุงูุฃุฌูุฒุฉ (Device Printers)

#### ุฌูุจ ุทุงุจุนุงุช ุฌูุงุฒ ูุญุฏุฏ
```http
GET /api/devices/{deviceId}/printers
```

#### ุฅุถุงูุฉ ุทุงุจุนุฉ ูุฌูุงุฒ
```http
POST /api/devices/{deviceId}/printers
Content-Type: application/json

{
  "printer_id": "THERMAL_01",
  "printer_name": "Thermal Printer 1"
}
```

#### ุชุญุฏูุซ ุงุณู ุทุงุจุนุฉ
```http
PUT /api/devices/printers/{id}
Content-Type: application/json

{
  "printer_name": "Updated Printer Name"
}
```

#### ุญุฐู ุทุงุจุนุฉ ูู ุฌูุงุฒ
```http
DELETE /api/devices/printers/{id}
```

### ๐ ุฅุถุงููุฉ (Additional)

#### ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ููุฎุงุฏู
```http
GET /
```

#### ูุญุต ุญุงูุฉ ุงูุฎุงุฏู
```http
GET /health
GET /api/health
```

#### ูุนูููุงุช API ุงูุนุงูุฉ
```http
GET /api
```

#### ูุนูููุงุช ุงูุดุจูุฉ
```http
GET /api/network
```

#### ุญุงูุฉ ุงูุทุงุจูุฑ
```http
GET /api/queue/status
```

#### ุฅุญุตุงุฆูุงุช ุงููุธุงู ุงููุฑุนูุฉ
```http
GET /api/stats
```

#### ุงูุชุฐุงูุฑ ุงูุญุฏูุซุฉ (ูุณุฎุฉ ูุจุณุทุฉ)
```http
GET /api/tickets/recent
```

#### ุชุตูุญ ุงูุดุจูุฉ ุงูุจุณูุท
```http
GET /api/network/browse
```

#### ุฃุญุฏุงุซ Socket.IO ููููุงุฑุฏ
```http
GET /api/socket/events
```

## โก Socket.IO Events (ุงูุฃุญุฏุงุซ ุงูููุฑูุฉ)

### ุฃุญุฏุงุซ ุงูุชุฐุงูุฑ

#### ุฅูุดุงุก ุชุฐูุฑุฉ
```javascript
// ุงูุฎุงุฏู ูุฑุณู:
socket.emit('ticket:created', {
  ticket: ticketData,
  service_name: "ุฎุฏูุฉ ุนููุงุก ุนุงูุฉ",
  ticket_number: "1",
  timestamp: "2025-07-04T15:44:24.000Z"
});
```

#### ุงุณุชุฏุนุงุก ุชุฐูุฑุฉ
```javascript
// ุงูุฎุงุฏู ูุฑุณู:
socket.emit('ticket:called', {
  ticket: ticketData,
  ticket_number: "1",
  service_name: "ุฎุฏูุฉ ุนููุงุก ุนุงูุฉ",
  window_id: 1,
  window_number: 1,
  timestamp: "2025-07-04T15:44:30.695Z"
});
```

#### ุฎุฏูุฉ ุชุฐูุฑุฉ
```javascript
// ุงูุฎุงุฏู ูุฑุณู:
socket.emit('ticket:served', {
  ticket: ticketData,
  ticket_number: "1",
  service_name: "ุฎุฏูุฉ ุนููุงุก ุนุงูุฉ",
  window_id: 1,
  timestamp: "2025-07-04T15:44:32.724Z"
});
```

#### ุชุญุฏูุซ ุญุงูุฉ ุงูุทุจุงุนุฉ
```javascript
// ุงูุฎุงุฏู ูุฑุณู:
socket.emit('print:status-updated', {
  ticket: ticketData,
  ticket_number: "1",
  print_status: "printed",
  timestamp: "2025-07-04T15:44:25.000Z"
});
```

### ุฃุญุฏุงุซ ุงูุทุงุจูุฑ

#### ุชุญุฏูุซ ุงูุทุงุจูุฑ
```javascript
// ุงูุฎุงุฏู ูุฑุณู:
socket.emit('queue:updated', {
  pending: 3,
  called: 1,
  served: 0,
  total: 4,
  timestamp: "2025-07-04T15:44:30.695Z"
});
```

### ุฃุญุฏุงุซ ุงูุฃุฌูุฒุฉ

#### ุชุณุฌูู ุฌูุงุฒ
```javascript
// ุงูุนููู ูุฑุณู:
socket.emit('device:register', {
  deviceId: 'CUSTOMER_KIOSK_01',
  deviceType: 'customer',
  location: 'Entrance Hall'
});

// ุงูุฎุงุฏู ูุฑุฏ:
socket.emit('device:registered', {
  success: true,
  device: deviceData,
  serverTime: "2025-07-04T15:44:22.000Z"
});
```

#### ุงุชุตุงู/ุงููุทุงุน ุงูุฃุฌูุฒุฉ
```javascript
// ุงูุฎุงุฏู ูุฑุณู:
socket.emit('device:connected', {
  deviceId: 'CUSTOMER_KIOSK_01',
  deviceType: 'customer',
  timestamp: "2025-07-04T15:44:22.000Z"
});

socket.emit('device:disconnected', {
  deviceId: 'CUSTOMER_KIOSK_01',
  timestamp: "2025-07-04T15:44:22.000Z"
});
```

### ุฃุญุฏุงุซ ุงูููุธููู

#### ุชููุฆุฉ ุฌูุณุฉ ููุธู
```javascript
// ุงูุฎุงุฏู ูุฑุณู:
socket.emit('employee:session-initialized', {
  windowNumber: "1",
  deviceId: 'EMPLOYEE_WIN_01',
  deviceName: 'Employee Terminal 1',
  timestamp: "2025-07-04T15:44:22.000Z"
});
```

#### ุชุนููู ุฎุฏูุฉ ููููุธู
```javascript
// ุงูุฎุงุฏู ูุฑุณู:
socket.emit('employee:service-assigned', {
  windowNumber: "1",
  serviceId: 1,
  serviceName: "ุฎุฏูุฉ ุนููุงุก ุนุงูุฉ",
  timestamp: "2025-07-04T15:44:22.000Z"
});
```

#### ุฅุฒุงูุฉ ุฎุฏูุฉ ูู ุงูููุธู
```javascript
// ุงูุฎุงุฏู ูุฑุณู:
socket.emit('employee:service-removed', {
  windowNumber: "1",
  timestamp: "2025-07-04T15:44:22.000Z"
});
```

### ุฃุญุฏุงุซ ุงูููุธููู

#### ุชููุฆุฉ ุฌูุณุฉ ููุธู
```javascript
// ุงูุฎุงุฏู ูุฑุณู:
socket.emit('employee:session-initialized', {
  windowNumber: "1",
  deviceId: "EMPLOYEE_WIN_01",
  deviceName: "Employee Window Terminal 1",
  timestamp: "2025-07-04T15:44:22.000Z"
});
```

#### ุชุนููู ุฎุฏูุฉ ููููุธู
```javascript
// ุงูุฎุงุฏู ูุฑุณู:
socket.emit('employee:service-assigned', {
  windowNumber: "1",
  serviceId: 1,
  serviceName: "ุฎุฏูุฉ ุนููุงุก",
  timestamp: "2025-07-04T15:44:22.000Z"
});
```

#### ุฅุฒุงูุฉ ุฎุฏูุฉ ูู ููุธู
```javascript
// ุงูุฎุงุฏู ูุฑุณู:
socket.emit('employee:service-removed', {
  windowNumber: "1",
  serviceId: 1,
  timestamp: "2025-07-04T15:44:22.000Z"
});
```

#### ุชุญุฏูุซ ููุธู
```javascript
// ุงูุฎุงุฏู ูุฑุณู:
socket.emit('employee:updated', {
  id: 1,
  window_number: "1",
  service_id: 1,
  service_name: "ุฎุฏูุฉ ุนููุงุก",
  is_active: true,
  device_id: "EMPLOYEE_WIN_01"
});
```

#### ุญุฐู ููุธู
```javascript
// ุงูุฎุงุฏู ูุฑุณู:
socket.emit('employee:deleted', {
  id: 1,
  windowNumber: "1",
  timestamp: "2025-07-04T15:44:22.000Z"
});
```

### ุฃุญุฏุงุซ ุงููุธุงู

#### ุชุญุฏูุซ ุฅุญุตุงุฆูุงุช ุงูุทุงุจูุฑ ุงูููุฑู
```javascript
// ุงูุฎุงุฏู ูุฑุณู ูู 5 ุซูุงู:
socket.emit('realtime:queue-update', {
  pending: 3,
  total: 10,
  tickets: [...],
  timestamp: "2025-07-04T15:44:22.000Z",
  serverTime: 1720098262000
});
```

#### ุชุญุฏูุซ ุฅุญุตุงุฆูุงุช ุณุฑูุน
```javascript
// ุงูุฎุงุฏู ูุฑุณู:
socket.emit('queue:stats-update', {
  pending: 3,
  total: 10,
  timestamp: "2025-07-04T15:44:22.000Z"
});
```

#### ุฅุนุงุฏุฉ ุชุนููู ุงููุธุงู ุงููููู
```javascript
// ุงูุฎุงุฏู ูุฑุณู ุนูุฏ ุงูุฅุนุงุฏุฉ ุงูููููุฉ:
socket.emit('system:daily-reset', {
  message: "ุชู ุชูููุฐ ุงูุฅุนุงุฏุฉ ุงูููููุฉ",
  resetTime: "2025-07-04T00:00:00.000Z",
  components: {
    tickets: true,
    pdfs: true,
    cache: true
  },
  timestamp: "2025-07-04T00:00:00.000Z"
});
```

#### ุฅุดุนุงุฑุงุช ููุดุจุงุจูู
```javascript
// ุงูุฎุงุฏู ูุฑุณู ููุดุจุงุจูู ุนูุฏ ุชููุฑ ุชุฐุงูุฑ:
socket.emit('window:notification', {
  windowId: 1,
  message: "ูุฏูู ุชุฐุงูุฑ ูู ุงูุชุธุงุฑ ุงูุฎุฏูุฉ",
  pendingCount: 3,
  serviceId: 1,
  serviceName: "ุฎุฏูุฉ ุนููุงุก",
  timestamp: "2025-07-04T15:44:22.000Z"
});
```

## ๐ ุณูุฑ ุงูุนูู ุงููุงูู

### 1. ุฅูุดุงุก ุงูุชุฐูุฑุฉ
```mermaid
sequenceDiagram
    participant C as Customer Kiosk
    participant S as Server
    participant D as Display
    participant E as Employee

    C->>S: POST /api/tickets
    S->>S: Create ticket in DB
    S->>C: Return ticket data
    S->>D: Socket: ticket:created
    S->>E: Socket: ticket:created
    S->>All: Socket: queue:updated
```

### 2. ุทุจุงุนุฉ ุงูุชุฐูุฑุฉ
```mermaid
sequenceDiagram
    participant C as Customer Kiosk
    participant S as Server
    participant P as Printer

    C->>P: Print ticket
    C->>S: PUT /api/tickets/{id}/print-status (printing)
    S->>All: Socket: print:status-updated
    P->>C: Print complete
    C->>S: PUT /api/tickets/{id}/print-status (printed)
    S->>All: Socket: print:status-updated
```

### 3. ุงุณุชุฏุนุงุก ุงูุชุฐูุฑุฉ
```mermaid
sequenceDiagram
    participant E as Employee
    participant S as Server
    participant D as Display

    E->>S: POST /api/tickets/call
    S->>S: Update ticket status to "called"
    S->>S: Set called_at timestamp
    S->>S: Set window_id
    S->>E: Return updated ticket
    S->>D: Socket: ticket:called
    S->>All: Socket: queue:updated
```

### 4. ุฎุฏูุฉ ุงูุชุฐูุฑุฉ
```mermaid
sequenceDiagram
    participant E as Employee
    participant S as Server

    E->>S: PATCH /api/tickets/{id} (status: served)
    S->>S: Update ticket status to "served"
    S->>S: Set served_at timestamp
    S->>E: Return updated ticket
    S->>All: Socket: ticket:served
    S->>All: Socket: queue:updated
```

## ๐ ููุฒุงุช ุงููุธุงู ุงููุชูุฏูุฉ

### 1. ุงูุงูุชุดุงู ุงูุชููุงุฆู ุนุจุฑ UDP
- ุงูุฃุฌูุฒุฉ ุชูุชุดู ุงูุฎุงุฏู ุชููุงุฆูุงู ุนุจุฑ UDP broadcast
- ูุง ุญุงุฌุฉ ูุฅุฏุฎุงู ุนููุงู IP ูุฏููุงู
- ุฅุนุงุฏุฉ ุงุชุตุงู ุชููุงุฆู ุนูุฏ ุงููุทุงุน ุงูุดุจูุฉ

### 2. ุงูุชุญุฏูุซุงุช ุงูููุฑูุฉ
- ุฌููุน ุงูุฃุฌูุฒุฉ ุชุชููู ุงูุชุญุฏูุซุงุช ููุฑุงู ุนุจุฑ Socket.IO
- ูุง ุญุงุฌุฉ ูุชุญุฏูุซ ุงูุตูุญุฉ ุฃู ุงุณุชุทูุงุน ุงูุฎุงุฏู
- ูุนูููุงุช ุงูุทุงุจูุฑ ูุญุฏุซุฉ ูู ุงูููุช ุงููุนูู

### 3. ูุธุงู ุงูุทุจุงุนุฉ ุงูุฐูู
- ุฏุนู ุทุงุจุนุงุช ุญุฑุงุฑูุฉ 80mm
- ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูุทุจุงุนุฉ (pending โ printing โ printed)
- ุฑุจุท ุงูุทุงุจุนุงุช ุจุงูุฃุฌูุฒุฉ ุนุจุฑ ุฌุฏูู device_printers
- ุทุจุงุนุฉ ููุฑูุฉ ูุน SumatraPDF
- ุฅุฏุงุฑุฉ ุฐููุฉ ููุทุงุจุนุงุช ุญุณุจ ููุน ุงูุฌูุงุฒ

### 4. ุฅุฏุงุฑุฉ ุงูุทุงุจุนุงุช ูุงูุฃุฌูุฒุฉ

#### ููู ูุนูู ุฑุจุท ุงูุทุงุจุนุงุช:
1. **ุชุณุฌูู ุงูุฌูุงุฒ**: ูู ุฌูุงุฒ (customer/display/employee) ููุณุฌู ููุณู ูุน ูุนุฑู ูุฑูุฏ
2. **ุฅุถุงูุฉ ุทุงุจุนุงุช**: ูููู ุฑุจุท ุทุงุจุนุฉ ุฃู ุฃูุซุฑ ุจูู ุฌูุงุฒ ุนุจุฑ `/api/devices/{deviceId}/printers`
3. **ุทุงุจุนุฉ ุงูุชุฑุงุถูุฉ**: ูู ุฌูุงุฒ ูููู ุฃู ูุญุฏุฏ ุทุงุจุนุฉ ุงูุชุฑุงุถูุฉ (`is_default: true`)
4. **ุชุญุฏูุซ ูุนูููุงุช**: ูููู ุชุนุฏูู ุฃุณูุงุก ุงูุทุงุจุนุงุช ุฃู ุญุฐููุง

#### ุฃููุงุน ุงูุทุจุงุนุฉ ุงููุฏุนููุฉ:
- **ุทุจุงุนุฉ ูุญููุฉ**: ูู ุฌูุงุฒ Customer ูุจุงุดุฑุฉ
- **ุทุจุงุนุฉ ุดุจููุฉ**: ูู ุฌูุงุฒ Display ููุชุฐุงูุฑ ุงููุนููุฉ
- **ุทุจุงุนุฉ ุฐููุฉ**: ุงุฎุชูุงุฑ ุชููุงุฆู ููุทุงุจุนุฉ ุงูููุงุณุจุฉ
- **ุทุจุงุนุฉ ุฎูููุฉ**: ูุนุงูุฌุฉ ุทุจุงุนุฉ ูุชูุฏูุฉ ูุน ุฅุนุงุฏุฉ ุงููุญุงููุฉ

#### ุขููุฉ ุงุฎุชูุงุฑ ุงูุทุงุจุนุฉ:
```
ุฅุฐุง ูุงู ููุงู printer_id ูุญุฏุฏ โ ุงุณุชุฎุฏู ูุฐู ุงูุทุงุจุนุฉ
โ
ุฅุฐุง ูู ููู ูุญุฏุฏ โ ุงุจุญุซ ุนู ุฃูู ุทุงุจุนุฉ ูุชุงุญุฉ ููุฌูุงุฒ
โ
ุฅุฐุง ูู ุชูุฌุฏ ุทุงุจุนุงุช โ ุงุณุชุฎุฏู ุทุงุจุนุฉ ุงููุธุงู ุงูุงูุชุฑุงุถูุฉ
```

### 5. ุฅุฏุงุฑุฉ ุงูุฃุฌูุฒุฉ
- ุชุชุจุน ุญุงูุฉ ุงูุฃุฌูุฒุฉ (online/offline)
- ุชุณุฌูู ุชููุงุฆู ููุฃุฌูุฒุฉ
- ูุฑุงูุจุฉ ุฏูุฑุฉ ุงูููุจ (heartbeat)

### 6. ุฅุฏุงุฑุฉ ุงูููุธููู
- ุชููุฆุฉ ุชููุงุฆูุฉ ูุฌูุณุฉ ุงูููุธู
- ุชุนููู ุดุจุงุจูู ุชููุงุฆูุงู
- ุฑุจุท ุงูุฎุฏูุงุช ุจุงูููุธููู
- ุชุชุจุน ุญุงูุฉ ุงููุดุงุท

### 7. ูุธุงู ุฅุนุงุฏุฉ ุงูุชุนููู ุงููููู
- ุฅุนุงุฏุฉ ุชุนููู ุชููุงุฆูุฉ ููุฃุฑูุงู ููููุงู
- ุฅุนุฏุงุฏุงุช ูุงุจูุฉ ููุชุฎุตูุต
- ุฅุนุงุฏุฉ ุชุนููู ููุฑูุฉ ุนูุฏ ุงูุญุงุฌุฉ

## ๐ ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ุงูุดุงูู

### โ ุงูููุฒุงุช ุงููุชุฃูุฏุฉ:

1. **ุฅูุดุงุก ุงูุชุฐุงูุฑ**: โ ูุนูู ุจุดูู ุตุญูุญ
2. **ุญุงูุฉ ุงูุทุจุงุนุฉ**: โ ูุชู ุชุญุฏูุซูุง ุจุดูู ุตุญูุญ (pending โ printing โ printed)
3. **ุงุณุชุฏุนุงุก ุงูุชุฐุงูุฑ**: โ ูุนูู ูุน ุชุญุฏูุซ called_at ู window_id
4. **ุฎุฏูุฉ ุงูุชุฐุงูุฑ**: โ ูุนูู ูุน ุชุญุฏูุซ served_at
5. **Socket.IO**: โ ุงูุฃุญุฏุงุซ ุงูููุฑูุฉ ุชุนูู ูุฌููุน ุงูุฃุฌูุฒุฉ
6. **ูุงุนุฏุฉ ุงูุจูุงูุงุช**: โ ุฌููุน ุงูุญููู ุชูููุฃ ุจุดูู ุตุญูุญ
7. **ุงูุชุดุงู UDP**: โ ูุนูู ููุงุชุตุงู ุงูุชููุงุฆู
8. **ุฅุฏุงุฑุฉ ุงูุฃุฌูุฒุฉ**: โ ุชุณุฌูู ูุชุชุจุน ุงูุฃุฌูุฒุฉ ูุนูู
9. **ุฅุฏุงุฑุฉ ุงูููุธููู**: โ ุชููุฆุฉ ูุชุนููู ุงูุฎุฏูุงุช ูุนูู
10. **ุฅุนุงุฏุฉ ุงูุชุนููู ุงููููู**: โ ูุธุงู ูุชูุงูู ููุงุจู ููุชุฎุตูุต
11. **ุทุงุจุนุงุช ุงูุฃุฌูุฒุฉ**: โ ุฅุฏุงุฑุฉ ุดุงููุฉ ููุทุงุจุนุงุช
12. **ุงูุฅุญุตุงุฆูุงุช ูุงูุชูุงุฑูุฑ**: โ ูุนูููุงุช ููุตูุฉ ูุฏูููุฉ

### ๐ ุงูุฅุญุตุงุฆูุงุช ูู ุงูุงุฎุชุจุงุฑ:
- **ุฅุฌูุงูู ุงูุชุฐุงูุฑ**: 4
- **ุงูุชุฐุงูุฑ ุงููุฎุฏููุฉ**: 4 (100%)
- **ุงูุชุฐุงูุฑ ุงููุนููุฉ**: 0
- **ุงูุฃุฌูุฒุฉ ุงููุชุตูุฉ**: 4/4
- **ุงูุฎุฏูุงุช**: 2
- **ุงูุดุจุงุจูู ุงููุดุทุฉ**: 2/2

## ๐ฏ ุฎูุงุตุฉ ุงูุชูููู

### ููุงุท ุงูููุฉ:
1. **ูุธุงู ูุชูุงูู**: ุฌููุน ุงูููููุงุช ุชุนูู ูุนุงู ุจุณูุงุณุฉ
2. **ุชุญุฏูุซุงุช ููุฑูุฉ**: Socket.IO ูููุฑ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุชุงุฒุฉ
3. **ูุงุนุฏุฉ ุจูุงูุงุช ูููุฉ**: ุฌููุน ุงูุจูุงูุงุช ูุญููุธุฉ ูุตุญูุญุฉ
4. **ุณูููุฉ ุงูุงุชุตุงู**: UDP discovery ูุฌุนู ุงูุฅุนุฏุงุฏ ุจุณูุทุงู
5. **ูุฑููุฉ ูู ุงูุชูุณุน**: ูููู ุฅุถุงูุฉ ุฃุฌูุฒุฉ ูุฎุฏูุงุช ุจุณูููุฉ
6. **ุฅุฏุงุฑุฉ ุดุงููุฉ**: ูุธุงู ูุชูุงูู ููููุธููู ูุงูุทุงุจุนุงุช
7. **ููุซูููุฉ ุนุงููุฉ**: ุฅุนุงุฏุฉ ุงุชุตุงู ุชููุงุฆู ููุฑุงูุจุฉ ุงูุญุงูุฉ
8. **ุชุญูู ูุชูุฏู**: ุฅุนุฏุงุฏุงุช ูุงุจูุฉ ููุชุฎุตูุต ูุงูุฅุฏุงุฑุฉ

### ุงูุชูุตูุงุช ููุชุทููุฑ ุงููุณุชูุจูู:
1. **ุฅุถุงูุฉ ูุงุฌูุฉ ุฅุฏุงุฑุฉ**: ููุญุฉ ุชุญูู ุดุงููุฉ ูููุธุงู
2. **ุชูุงุฑูุฑ ูุชูุฏูุฉ**: ุฅุญุตุงุฆูุงุช ููุตูุฉ ูุชูุงุฑูุฑ ุฏูุฑูุฉ
3. **ุฏุนู ุทุงุจุนุงุช ุฅุถุงููุฉ**: ุฃููุงุน ูุฎุชููุฉ ูู ุงูุทุงุจุนุงุช
4. **ูุธุงู ุงููุตุงุฏูุฉ**: ุชุฃููู ุงููุตูู ูููุธุงุฆู ุงูุญุณุงุณุฉ
5. **ุฏุนู ุงููุบุงุช**: ูุงุฌูุงุช ูุชุนุฏุฏุฉ ุงููุบุงุช

## ๐ ุงูุฎูุงุตุฉ ุงูููุงุฆูุฉ

ูุธุงู CASNOS ุฌุงูุฒ ููุฅูุชุงุฌ! ุฌููุน ุงูููุฒุงุช ุงูุฃุณุงุณูุฉ ูุงููุชูุฏูุฉ ุชุนูู ุจุดูู ุตุญูุญ:
- โ ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุงูุชุฐุงูุฑ
- โ ุทุจุงุนุฉ ุงูุชุฐุงูุฑ ูุน ุชุชุจุน ุงูุญุงูุฉ
- โ ุงุณุชุฏุนุงุก ูุฎุฏูุฉ ุงูุชุฐุงูุฑ
- โ ุชุญุฏูุซุงุช ููุฑูุฉ ูุฌููุน ุงูุฃุฌูุฒุฉ
- โ ูุงุนุฏุฉ ุจูุงูุงุช ูุชูุงููุฉ ูููุธูุฉ
- โ ุดุจูุฉ ุชูุงุตู ูููุฉ ููุฑูุฉ
- โ ุฅุฏุงุฑุฉ ุดุงููุฉ ููููุธููู ูุงูุดุจุงุจูู
- โ ูุธุงู ุทุงุจุนุงุช ูุชุทูุฑ
- โ ุฅุนุงุฏุฉ ุชุนููู ูููู ุชููุงุฆู
- โ ุฅุญุตุงุฆูุงุช ูุชูุงุฑูุฑ ููุตูุฉ

ุงููุธุงู ููุฎุชุจุฑ ูููุชุญูู ูู ุตุญุชู ููููู ุงูุงุนุชูุงุฏ ุนููู ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ.

## ๐จ๏ธ ุฏููู ุฅุฏุงุฑุฉ ุงูุทุงุจุนุงุช ุงูุนููู

### ูุซุงู ุนููู ูุฅุนุฏุงุฏ ุงููุธุงู:

#### 1. ุชุณุฌูู ุงูุฃุฌูุฒุฉ
```http
# ุฌูุงุฒ ุงูุนููุงุก
POST /api/devices
{
  "device_id": "CUSTOMER_KIOSK_01",
  "name": "Customer Kiosk 1",
  "device_type": "customer",
  "ip_address": "192.168.1.100"
}

# ุฌูุงุฒ ุงูุนุฑุถ
POST /api/devices
{
  "device_id": "DISPLAY_MAIN_01",
  "name": "Main Display",
  "device_type": "display",
  "ip_address": "192.168.1.101"
}
```

#### 2. ุฑุจุท ุงูุทุงุจุนุงุช ุจุงูุฃุฌูุฒุฉ
```http
# ุฑุจุท ุทุงุจุนุฉ ุญุฑุงุฑูุฉ ุจุฌูุงุฒ ุงูุนููุงุก
POST /api/devices/CUSTOMER_KIOSK_01/printers
{
  "printer_id": "THERMAL_CUSTOMER_01",
  "printer_name": "ุทุงุจุนุฉ ุงูุชุฐุงูุฑ - ุงูุนููุงุก"
}

# ุฑุจุท ุทุงุจุนุฉ ุนุงุฏูุฉ ุจุฌูุงุฒ ุงูุนุฑุถ
POST /api/devices/DISPLAY_MAIN_01/printers
{
  "printer_id": "HP_LASERJET_01",
  "printer_name": "HP LaserJet - ุงูุนุฑุถ"
}
```

#### 3. ุณูุฑ ุงูุนูู ุงูุทุจูุนู ููุทุจุงุนุฉ
```
ุงูุนููู ููุดุฆ ุชุฐูุฑุฉ โ ูุฎุชุงุฑ ุงูุทุงุจุนุฉ ุฃู ูุณุชุฎุฏู ุงูุงูุชุฑุงุถูุฉ โ
ุทุจุงุนุฉ ููุฑูุฉ โ ุชุญุฏูุซ print_status ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช โ
ุฅุดุนุงุฑ real-time ูุฌููุน ุงูุฃุฌูุฒุฉ
```

### ูุตุงุฆุญ ุฅุฏุงุฑุฉ ุงูุทุงุจุนุงุช:
- **ุงุณุชุฎุฏู ุฃุณูุงุก ูุงุถุญุฉ**: ูุซู "ุทุงุจุนุฉ ุงูุงุณุชูุจุงู - ุงูุทุงุจู ุงูุฃูู"
- **ุงุฑุจุท ุทุงุจุนุฉ ููู ุฌูุงุฒ**: ูุชุฌูุจ ุฃุฎุทุงุก ุงูุทุจุงุนุฉ
- **ุงุฎุชุจุฑ ุงูุทุงุจุนุงุช**: ุฏูุฑูุงู ููุชุฃูุฏ ูู ุนูููุง
- **ุฑุงูุจ ุญุงูุฉ ุงูุทุจุงุนุฉ**: ุนุจุฑ `print_status` ูู ุงูุชุฐุงูุฑ

### ูุฑุงูุจุฉ ููุชุงุจุนุฉ ุงูุทุงุจุนุงุช:

#### ุงุณุชุนูุงู ุญุงูุฉ ุงูุทุงุจุนุงุช
```http
# ุฌูุจ ุฌููุน ุทุงุจุนุงุช ุงูุฃุฌูุฒุฉ
GET /api/devices/printers

# ุฌูุจ ุทุงุจุนุงุช ุฌูุงุฒ ูุญุฏุฏ
GET /api/devices/CUSTOMER_KIOSK_01/printers
```

#### ุญู ูุดุงูู ุงูุทุจุงุนุฉ ุงูุดุงุฆุนุฉ:
1. **ูุดู ุงูุทุจุงุนุฉ**:
   - ุชุญูู ูู ูุฌูุฏ ุงูุทุงุจุนุฉ ูู ุงููุธุงู
   - ุชุฃูุฏ ูู ุญุงูุฉ `print_status` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ุงุฎุชุจุฑ SumatraPDF ุฃู ุงููุธุงู ุงูุจุฏูู

2. **ุทุงุจุนุฉ ุบูุฑ ูุชููุฑุฉ**:
   - ุงููุธุงู ูุชุญูู ุชููุงุฆูุงู ููุทุงุจุนุฉ ุงูุงูุชุฑุงุถูุฉ
   - ุฃู ูุณุชุฎุฏู Windows default viewer ูุจุฏูู

3. **ุชุญุฏูุซ ูุนูููุงุช ุงูุทุงุจุนุฉ**:
   ```http
   PUT /api/devices/printers/{id}
   {
     "printer_name": "ุงุณู ุฌุฏูุฏ ููุทุงุจุนุฉ"
   }
   ```

#### ูููุฒุงุช ุงูุทุจุงุนุฉ ุงููุชูุฏูุฉ:
- **ุทุจุงุนุฉ ุตุงูุชุฉ**: ุจุฏูู ููุงูุฐ ุฃู ุชุฃููุฏุงุช
- **ุฅุนุงุฏุฉ ุงููุญุงููุฉ**: ูู ุญุงูุฉ ูุดู ุงูุทุจุงุนุฉ
- **ุทุจุงุนุฉ ุฎูููุฉ**: ูุง ุชูุนุทู ูุงุฌูุฉ ุงููุณุชุฎุฏู
- **ุชุชุจุน ุฏููู**: ูุญุงูุฉ ูู ุนูููุฉ ุทุจุงุนุฉ

---

## ๐ ููุฎุต ุฅุฏุงุฑุฉ ุงูุทุงุจุนุงุช (ุจุณูุท)

### ุฌุฏูู device_printers ูุฏุนู:
โ **ุฑุจุท ูุชุนุฏุฏ**: ุทุงุจุนุฉ ูุงุญุฏุฉ ุฃู ุฃูุซุฑ ููู ุฌูุงุฒ
โ **ูููุฏ ุงูุฃูุงู**: ูุง ูููู ุฑุจุท ููุณ ุทุงุจุนุฉ ูููุณ ุงูุฌูุงุฒ ูุฑุชูู
โ **ุฅุฏุงุฑุฉ ุณููุฉ**: ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐู ุทุงุจุนุงุช ุนุจุฑ API
โ **ุชุชุจุน ุฏููู**: ุชูุงุฑูุฎ ุงูุฅูุดุงุก ูุงูุชุญุฏูุซ ููู ุทุงุจุนุฉ

### ุชุฏูู ุงูุทุจุงุนุฉ ุงูุจุณูุท:
```
ุนููู ููุดุฆ ุชุฐูุฑุฉ โ ุงููุธุงู ูุฎุชุงุฑ ุทุงุจุนุฉ โ ุทุจุงุนุฉ ููุฑูุฉ โ
ุชุญุฏูุซ print_status โ ุฅุดุนุงุฑ real-time ููุดุงุดุงุช
```

### ุฃููุงุน ุงูุทุงุจุนุงุช ุงููุฏุนููุฉ:
- **ุญุฑุงุฑูุฉ 80mm**: ููุชุฐุงูุฑ ุงูุณุฑูุนุฉ
- **ููุฒุฑ/ุญุจุฑ**: ููุทุจุงุนุฉ ุนุงููุฉ ุงูุฌูุฏุฉ
- **ุดุจููุฉ**: ููุทุงุจุนุงุช ุงููุดุชุฑูุฉ
- **ูุญููุฉ**: ุงููุชุตูุฉ ูุจุงุดุฑุฉ ุจุงูุฌูุงุฒ

### ุงููุธุงู ูุนูู ูุน:
- **SumatraPDF**: ููุทุจุงุนุฉ ุงูุตุงูุชุฉ ุงูุณุฑูุนุฉ
- **Windows Default**: ูุจุฏูู ุชููุงุฆู
- **ุฅุนุงุฏุฉ ุงููุญุงููุฉ**: ุนูุฏ ูุดู ุงูุทุจุงุนุฉ
- **ุชุชุจุน ุดุงูู**: ููู ุนูููุฉ ุทุจุงุนุฉ

**ุงููุชูุฌุฉ**: ูุธุงู ุทุจุงุนุฉ ููุซูู ูุณูู ุงูุฅุฏุงุฑุฉ ูุฏุนู ุฌููุน ุฃููุงุน ุงูุทุงุจุนุงุช! ๐
